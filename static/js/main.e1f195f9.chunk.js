(this.webpackJsonpkeyboard=this.webpackJsonpkeyboard||[]).push([[0],{45:function(e){e.exports=JSON.parse('{"a":"https://github.com/l1ck0h/keyboard"}')},55:function(e,t,n){},74:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),i=n(16),c=n.n(i),s=(n(55),n(7)),o=n(14),u=n(114),d=n(112),l=n(111),j=n(44),p=function(e){return Object(o.a)(e,"midi").toNote()},b=0,m=function(e){return b=window.setInterval(e,1e3)},v=function(){return window.clearInterval(b)},f=(n(74),n(6));var O=function(e){var t=Object(a.useContext)(te).appDispatch,n=Object(a.useState)("Drop a midi file here"),r=Object(s.a)(n,2),i=r[0],c=r[1],u=e.sampler,d=function(e){var n=new FileReader;n.onload=function(e){var n=new j.Midi(e.target.result);o.d.cancel(),n.tracks.forEach((function(e){new o.b((function(e,t){u.triggerAttackRelease(t.name,t.duration,e,t.velocity);var n=document.querySelector('[data-key-num="'.concat(function(e){return Object(o.a)(e).toMidi()}(t.name),'"]'));n.classList.add("pressing"),setTimeout((function(){return n.classList.remove("pressing")}),900*t.duration)}),e.notes).start()})),t({type:"setDuration",duration:Math.ceil(n.duration)}),t({type:"setTime",time:0}),t({type:"playMidi"}),m((function(){return t({type:"countTime"})})),t({type:"setDisabled",disabled:!1})},n.readAsArrayBuffer(e)};return Object(f.jsxs)("div",{id:"fileDrop",onDragEnter:function(e){return e.currentTarget.classList.add("hover")},onDragLeave:function(e){return e.currentTarget.classList.remove("hover")},onDrop:function(e){return e.currentTarget.classList.remove("hover")},children:[Object(f.jsx)("span",{id:"text",children:i}),Object(f.jsx)("input",{type:"file",accept:"audio/midi",onChange:function(e){var t=Object(s.a)(e.target.files,1)[0];c(t.name),d(t)}})]})},h=n(113),x=n(105),y=n(45);var k=function(){return Object(f.jsx)(h.a,{href:y.a,target:"_blank",rel:"noopener noreferrer",children:Object(f.jsx)(x.a,{})})},g=(n(80),function(e){var t=Math.floor(e%86400/3600),n=Math.floor(e%86400%3600/60),a=Math.floor(e%86400%3600%60),r=n+":"+a.toString().padStart(2,"0");return t?t+":"+r:r});var C=function(e){return Object(f.jsxs)("span",{id:"time",children:[g(e.time)," / ",g(e.duration)]})},D=n(106),A=n(107);var N=function(e){return Object(f.jsx)(h.a,{disabled:e.disabled,onClick:e.onClick,children:"started"===e.state?Object(f.jsx)(D.a,{}):Object(f.jsx)(A.a,{})})},S=n(108);var F=function(e){return Object(f.jsx)(h.a,{disabled:e.disabled,onClick:e.onClick,children:Object(f.jsx)(S.a,{})})},w=n(109),L=n(110);var M=function(e){return Object(f.jsx)(h.a,{onClick:e.onClick,children:e.mute?Object(f.jsx)(w.a,{}):Object(f.jsx)(L.a,{})})};n(81);var T=function(e){var t=Object(a.useContext)(te),n=t.appState,r=t.appDispatch,i=Object(a.useState)(!1),c=Object(s.a)(i,2),o=c[0],u=c[1];return Object(f.jsxs)("div",{id:"toolbar",children:[Object(f.jsx)(N,{state:n.toneState,disabled:n.disabled,onClick:function(){"started"!==n.toneState?(r({type:"playMidi"}),m((function(){return r({type:"countTime"})}))):r({type:"pauseMidi"})}}),Object(f.jsx)(F,{disabled:n.disabled,onClick:function(){r({type:"stopMidi"})}}),Object(f.jsx)(M,{mute:o,onClick:function(){if(e.sampler){var t=e.sampler.volume;t.value=o?0:t.minValue,u(!o)}}}),Object(f.jsx)(C,{time:n.time,duration:n.duration}),Object(f.jsx)(k,{})]})};n(82);var E=function(e){return Object(f.jsxs)("div",{id:"menu",children:[Object(f.jsx)(O,{sampler:e.sampler}),Object(f.jsx)(T,{sampler:e.sampler})]})},I=n(8),B=n(47),P=n(115),q=n(38),R=n.n(q),J=(n(83),/C[1-8]/);var z=function(e){var t=p(e.midiNote).toString();return Object(f.jsx)("div",{className:"keyboard-key",children:Object(f.jsx)("div",{className:e.isBlackKey?"black-key":"white-key","data-key-num":e.midiNote,children:Object(f.jsx)("span",{className:"key-label",children:J.test(t)?t:""})})})},K=(n(84),function(e){switch((e-20)%12){case 0:case 2:case 5:case 7:case 10:return!0;default:return!1}});var U=function(e){return Object(f.jsx)("div",{className:"keyboard-row",children:e.midiNotes.map((function(t,n){return Object(f.jsx)(z,{midiNote:t,isBlackKey:K(t)},n+e.startNum)}))})},V=Object(P.a)(21,109),_=V.length/2,G=function(e){var t=Object(B.a)(e),n=t.slice(0),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n.reduce((function(e,t,r){return r%a?e:[].concat(Object(I.a)(e),[n.slice(r,r+a)])}),[])}(V,V.length/2),H=Object(s.a)(G,2),Q=H[0],W=H[1];var X=function(e){var t=function(t){if(e.sampler){var n=t.target;n.dataset.keyNum&&(n.classList.add("pressing"),e.sampler.triggerAttack(p(n.dataset.keyNum)))}},n=function(t){if(e.sampler){var n=t.target;n.classList.remove("pressing"),e.sampler.triggerRelease(p(n.dataset.keyNum))}},a=function(e){0!==Array.from(document.querySelectorAll(":active")).length&&t(e)},r=function(e){n(e)};return Object(f.jsxs)("div",{id:"keyboard-container",onPointerDown:function(e){t(e);var n=e.currentTarget;n.addEventListener("pointerover",a),n.addEventListener("pointerout",r)},onPointerUp:function(e){n(e);var t=e.currentTarget;t.removeEventListener("pointerover",a),t.removeEventListener("pointerout",r)},children:[Object(f.jsx)(R.a,{query:"(min-width: 1025px)",children:Object(f.jsx)(U,{midiNotes:V,startNum:0})}),Object(f.jsxs)(R.a,{query:"(max-width: 1024px)",children:[Object(f.jsx)(U,{midiNotes:Q,startNum:0}),Object(f.jsx)(U,{midiNotes:W,startNum:_})]})]})},Y=n(2),Z={time:0,duration:0,toneState:"stopped",disabled:!0},$=function(e,t){switch(t.type){case"setTime":return Object(Y.a)(Object(Y.a)({},e),{},{time:t.time});case"countTime":return e.duration>e.time?Object(Y.a)(Object(Y.a)({},e),{},{time:e.time+1}):(v(),Object(Y.a)(Object(Y.a)({},e),{},{time:0,toneState:o.d.stop().state}));case"setDuration":return Object(Y.a)(Object(Y.a)({},e),{},{duration:t.duration});case"playMidi":return Object(Y.a)(Object(Y.a)({},e),{},{toneState:o.d.start().state});case"pauseMidi":return v(),Object(Y.a)(Object(Y.a)({},e),{},{toneState:o.d.pause().state});case"stopMidi":return v(),Object(Y.a)(Object(Y.a)({},e),{},{time:0,toneState:o.d.stop().state});case"setDisabled":return Object(Y.a)(Object(Y.a)({},e),{},{disabled:t.disabled});default:return e}},ee=(n(85),Object(l.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}))),te=Object(a.createContext)({});var ne=function(){var e=ee(),t=Object(a.useState)(!0),n=Object(s.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(void 0),l=Object(s.a)(c,2),j=l[0],p=l[1],b=Object(a.useReducer)($,Z),m=Object(s.a)(b,2),v=m[0],O=m[1];return Object(a.useEffect)((function(){var e=new o.c({attack:0,urls:{A0:"A0v1.mp3",C1:"C1v1.mp3","D#1":"Ds1v1.mp3","F#1":"Fs1v1.mp3",A1:"A1v1.mp3",C2:"C2v1.mp3","D#2":"Ds2v1.mp3","F#2":"Fs2v1.mp3",A2:"A2v1.mp3",C3:"C3v1.mp3","D#3":"Ds3v1.mp3","F#3":"Fs3v1.mp3",A3:"A3v1.mp3",C4:"C4v1.mp3","D#4":"Ds4v1.mp3","F#4":"Fs4v1.mp3",A4:"A4v1.mp3",C5:"C5v1.mp3","D#5":"Ds5v1.mp3","F#5":"Fs5v1.mp3",A5:"A5v1.mp3",C6:"C6v1.mp3","D#6":"Ds6v1.mp3","F#6":"Fs6v1.mp3",A6:"A6v1.mp3",C7:"C7v1.mp3","D#7":"Ds7v1.mp3","F#7":"Fs7v1.mp3",A7:"A7v1.mp3",C8:"C8v1.mp3"},baseUrl:"/l1ck0h/keyboard/audio/",release:1,onload:function(){p(e),i(!1)}}).toDestination()}),[]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)(te.Provider,{value:{appState:v,appDispatch:O},children:[Object(f.jsx)(E,{sampler:j}),Object(f.jsx)(X,{sampler:j})]}),Object(f.jsx)(u.a,{className:e.backdrop,open:r,children:Object(f.jsx)(d.a,{color:"inherit"})})]})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,117)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(ne,{})}),document.getElementById("root")),ae()}},[[86,1,2]]]);
//# sourceMappingURL=main.e1f195f9.chunk.js.map