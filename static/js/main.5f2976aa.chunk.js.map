{"version":3,"sources":["components/BaseForm.tsx","components/BaseInputNumber.tsx","components/BaseInputRadio.tsx","components/BaseMenu.tsx","components/BaseSelect.tsx","components/BaseIconButton.tsx","components/BaseTime.tsx","store/index.ts","hooks/useSynth.ts","hooks/useSynthParams.ts","hooks/usePlayer.ts","components/ThePlayer.tsx","components/TheSettings.tsx","components/TheKeyboard.tsx","components/BaseLink.tsx","components/TheFooter.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["BaseForm","props","Children","toArray","children","LabelComponent","InputComponent","className","style","width","BaseInputNumber","htmlFor","label","type","id","min","max","step","value","onChange","BaseInputRadio","map","child","i","name","checked","BaseMenu","contentName","BaseSelect","BasePlayPauseButton","onClick","disabled","icon","iconProp","convertTime","t","padZero","num","toString","padStart","hh","Math","floor","mm","ss","BaseTime","time","duration","synth","PolySynth","toDestination","params","get","StoreContext","createContext","initialState","toneState","synthParams","playerDisabled","playbackTimeID","reducer","state","action","payload","Transport","start","window","clearInterval","stop","pause","useSynth","useContext","matchSynthParamsKey","key","callback","lensPath","_view","curry","obj","lens","view","_set","set","useSynthParams","dispatch","viewSynthParams","setSynthParams","getParams","setParams","newParams","setter","usePlayer","playbackTime","setInterval","handlers","dropFile","e","file","target","files","reader","FileReader","onload","midi","Midi","result","cancel","tracks","forEach","track","Part","note","triggerAttackRelease","velocity","keyNumElemDataset","document","querySelector","Frequency","toMidi","toMIDI","dataset","active","setTimeout","notes","ceil","readAsArrayBuffer","PlayPause","ThePlayer","usePlayerDI","accept","BaseIconButton","faPlay","faPause","faStop","TheSettings","display","flexFlow","justifyContent","arrayChunk","array","size","reduce","acc","index","slice","midiNotes","range","midiNotesLen","length","toNote","midiNote","isBlackKey","TheKeyboard","useSynthDI","useState","dragging","setDragging","pressKey","keyNum","triggerAttack","now","releaseKey","triggerRelease","useEffect","pointerdownHandler","pointerupHandler","addEventListener","removeEventListener","margin","onPointerDown","onPointerOver","onPointerUp","onPointerOut","reverse","chunk","_note","test","BaseLink","href","url","rel","TheFooter","App","useReducer","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5f2976aa.chunk.js","sourcesContent":["import { ReactNode, Children } from \"react\";\n\nfunction BaseForm(props: { children: ReactNode }) {\n  const [LabelComponent, InputComponent] = Children.toArray(props.children);\n  return (\n    <div className=\"el-cluster el-cluster--justify:space-between el-cluster--space:0\">\n      <div style={{ width: \"91px\" }}>{LabelComponent}</div>\n      <div>{InputComponent}</div>\n    </div>\n  );\n}\n\nexport default BaseForm;\n","import BaseForm from \"./BaseForm\";\n\nfunction BaseInputNumber(props: {\n  label: string;\n  id: string;\n  min?: string;\n  max?: string;\n  step?: string;\n  value: string;\n  onChange: (e: any) => void;\n}) {\n  return (\n    <BaseForm>\n      <label className=\"form-label\" htmlFor={props.label}>\n        {props.label}\n      </label>\n      <input\n        type=\"number\"\n        id={props.label}\n        className=\"form-input\"\n        min={props.min}\n        max={props.max}\n        step={props.step}\n        value={props.value}\n        onChange={props.onChange}\n      />\n    </BaseForm>\n  );\n}\n\nexport default BaseInputNumber;\n","import { ReactNode, Children } from \"react\";\nimport BaseForm from \"./BaseForm\";\n\nfunction BaseInputRadio(props: {\n  label: string;\n  name: string;\n  value: string;\n  children: ReactNode;\n  onChange: (e: any) => void;\n}) {\n  return (\n    <BaseForm>\n      <label className=\"form-label\">{props.label}</label>\n      <>\n        {Children.map(props.children, (child, i) => (\n          <label className=\"form-radio form-inline\" key={i}>\n            <input\n              type=\"radio\"\n              name={props.name}\n              value={child as string}\n              checked={child === props.value}\n              onChange={props.onChange}\n            />\n            <i className=\"form-icon\"></i>\n            {child}\n          </label>\n        ))}\n      </>\n    </BaseForm>\n  );\n}\nexport default BaseInputRadio;\n","import { ReactNode, Children } from \"react\";\n\nfunction BaseMenu(props: { children: ReactNode; contentName?: string }) {\n  return (\n    <ul className=\"menu el-stack\">\n      {props.contentName ? (\n        <li className=\"divider\" data-content={props.contentName}></li>\n      ) : (\n        \"\"\n      )}\n      {/* <li className=\"divider\" data-content=\"LINKS\"></li> */}\n      {Children.map(props.children, (child, i) => (\n        <li className=\"menu-item\" key={i}>\n          {child}\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default BaseMenu;\n","import { ReactNode, Children } from \"react\";\nimport BaseForm from \"./BaseForm\";\n\nfunction BaseSelect(props: {\n  label: string;\n  id: string;\n  children: ReactNode;\n  value: string;\n  onChange: (e: any) => void;\n}) {\n  return (\n    <BaseForm>\n      <label className=\"form-label\" htmlFor={props.id}>\n        {props.label}\n      </label>\n      <select\n        id={props.id}\n        className=\"form-select\"\n        value={props.value}\n        onChange={props.onChange}\n      >\n        {Children.map(props.children, (child, i) => (\n          <option key={i} value={child as string}>\n            {child}\n          </option>\n        ))}\n      </select>\n    </BaseForm>\n  );\n}\nexport default BaseSelect;\n","import { IconProp } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nfunction BasePlayPauseButton(props: {\n  iconProp: IconProp;\n  onClick: React.MouseEventHandler<HTMLButtonElement>;\n  disabled?: boolean;\n}) {\n  return (\n    <button\n      className=\"btn btn-action s-circle\"\n      onClick={props.onClick}\n      disabled={props.disabled}\n    >\n      <FontAwesomeIcon icon={props.iconProp} />\n    </button>\n  );\n}\n\nexport default BasePlayPauseButton;\n","const convertTime = (t: number) => {\n  const padZero = (num: number) => num.toString().padStart(2, \"0\");\n  const hh = Math.floor((t % (24 * 60 * 60)) / (60 * 60));\n  const mm = Math.floor(((t % (24 * 60 * 60)) % (60 * 60)) / 60);\n  const ss = Math.floor(((t % (24 * 60 * 60)) % (60 * 60)) % 60);\n  return hh ? hh + \":\" + mm + \":\" + padZero(ss) : mm + \":\" + padZero(ss);\n};\n\nfunction BaseTime(props: { time: number; duration: number }) {\n  return (\n    <span className=\"base-time\">\n      {convertTime(props.time)} / {convertTime(props.duration)}\n    </span>\n  );\n}\n\nexport default BaseTime;\n","import { createContext, Dispatch } from \"react\";\nimport { PlaybackState, PolySynth, Transport } from \"tone\";\n\nconst synth = new PolySynth().toDestination();\nconst params = synth.get();\n\nexport type State = {\n  time: number;\n  duration: number;\n  toneState: PlaybackState;\n  synth: PolySynth;\n  synthParams: any;\n  playerDisabled: boolean;\n  playbackTimeID: number;\n};\n\nexport type Action =\n  | {\n      type: \"SET_SYNTH_PARAMS\";\n      payload: { synthParams: any };\n    }\n  | {\n      type: \"LOADED_MIDI\";\n      payload: { duration: number; playbackTimeID: number };\n    }\n  | { type: \"COUNT_TIME\" }\n  | { type: \"PLAY_MIDI\"; payload: { playbackTimeID: number } }\n  | { type: \"PAUSE_MIDI\" }\n  | { type: \"STOP_MIDI\" };\n\nexport const StoreContext = createContext(\n  {} as { state: State; dispatch: Dispatch<Action> }\n);\n\nexport const initialState: State = {\n  time: 0,\n  duration: 0,\n  toneState: \"stopped\",\n  synth: synth,\n  synthParams: params,\n  playerDisabled: true,\n  playbackTimeID: 0,\n};\n\nexport const reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case \"SET_SYNTH_PARAMS\": {\n      return {\n        ...state,\n        synthParams: action.payload.synthParams,\n      };\n    }\n    case \"LOADED_MIDI\": {\n      const payload = action.payload;\n      return {\n        ...state,\n        duration: payload.duration,\n        time: 0,\n        playerDisabled: false,\n        toneState: Transport.start().state,\n        playbackTimeID: payload.playbackTimeID,\n      };\n    }\n    case \"COUNT_TIME\": {\n      if (state.duration > state.time) {\n        return {\n          ...state,\n          time: state.time + 1,\n        };\n      } else {\n        window.clearInterval(state.playbackTimeID);\n        return {\n          ...state,\n          time: 0,\n          toneState: Transport.stop().state,\n          playbackTimeID: 0,\n        };\n      }\n    }\n    case \"PLAY_MIDI\": {\n      return {\n        ...state,\n        toneState: Transport.start().state,\n        playbackTimeID: action.payload.playbackTimeID,\n      };\n    }\n    case \"PAUSE_MIDI\": {\n      window.clearInterval(state.playbackTimeID);\n      return {\n        ...state,\n        toneState: Transport.pause().state,\n        playbackTimeID: 0,\n      };\n    }\n    case \"STOP_MIDI\": {\n      window.clearInterval(state.playbackTimeID);\n      return {\n        ...state,\n        time: 0,\n        toneState: Transport.stop().state,\n        playbackTimeID: 0,\n      };\n    }\n  }\n};\n","import { useContext } from \"react\";\nimport { StoreContext } from \"../store\";\n\nconst useSynth = () => {\n  const { state } = useContext(StoreContext);\n  return state.synth;\n};\n\nexport default useSynth;\n","import { useContext } from \"react\";\nimport { curry, Lens, lensPath, set, view } from \"ramda\";\nimport { StoreContext } from \"../store\";\n\ntype SynthParamsKey_Oscillator = \"type\" | \"partialCount\" | \"phase\";\ntype SynthParamsKey_Envelope =\n  | \"attack\"\n  | \"attackCurve\"\n  | \"decay\"\n  | \"decayCurve\"\n  | \"release\"\n  | \"releaseCurve\"\n  | \"sustain\";\ntype SynthParamsKey =\n  | \"detune\"\n  | \"portamento\"\n  | \"volume\"\n  | SynthParamsKey_Oscillator\n  | SynthParamsKey_Envelope;\n\nconst matchSynthParamsKey = (key: SynthParamsKey, callback: any) => {\n  switch (key) {\n    case \"detune\":\n    case \"portamento\":\n    case \"volume\": {\n      return callback(lensPath([key]));\n    }\n    case \"type\":\n    case \"partialCount\":\n    case \"phase\": {\n      return callback(lensPath([\"oscillator\", key]));\n    }\n    case \"attack\":\n    case \"attackCurve\":\n    case \"decay\":\n    case \"decayCurve\":\n    case \"release\":\n    case \"releaseCurve\":\n    case \"sustain\": {\n      return callback(lensPath([\"envelope\", key]));\n    }\n  }\n};\n\nconst _view = curry((obj: any, lens: Lens<any, any>) => view(lens, obj));\n\nconst _set = curry((obj: any, lens: Lens<any, any>, value: any) =>\n  set(lens, value, obj)\n);\n\nconst useSynthParams = () => {\n  const { state, dispatch } = useContext(StoreContext);\n  const viewSynthParams = _view(state.synthParams);\n  const setSynthParams = _set(state.synthParams);\n  return {\n    getParams: (key: SynthParamsKey) => {\n      return matchSynthParamsKey(key, (lens: Lens<any, any>) =>\n        viewSynthParams(lens)\n      );\n    },\n    setParams: (key: SynthParamsKey, value: any) => {\n      const newParams = matchSynthParamsKey(key, (lens: Lens<any, any>) => {\n        const setter = setSynthParams(lens);\n        state.synth!.set(setter(value ? value : \"0\"));\n        return setter(value);\n      });\n      dispatch({\n        type: \"SET_SYNTH_PARAMS\",\n        payload: {\n          synthParams: newParams,\n        },\n      });\n    },\n  };\n};\n\nexport default useSynthParams;\n","import { useContext } from \"react\";\nimport { Frequency, Part, Transport } from \"tone\";\nimport { Midi } from \"@tonejs/midi\";\nimport { StoreContext } from \"../store\";\n\nconst toMIDI = (note: string) => Frequency(note).toMidi();\n\nconst usePlayer = () => {\n  const { state, dispatch } = useContext(StoreContext);\n  const synth = state.synth;\n  const playbackTime = () =>\n    window.setInterval(() => dispatch({ type: \"COUNT_TIME\" }), 1000);\n\n  const dropFile = (e: any) => {\n    const [file] = e.target.files;\n    const reader = new FileReader();\n    reader.onload = (e: any) => {\n      const midi = new Midi(e.target.result);\n      Transport.cancel();\n      midi.tracks.forEach((track) => {\n        new Part((time, note) => {\n          synth?.triggerAttackRelease(\n            note.name,\n            note.duration,\n            time,\n            note.velocity\n          );\n          const keyNumElemDataset = (\n            document.querySelector(\n              `[data-key-num=\"${toMIDI(note.name)}\"]`\n            )! as HTMLElement\n          ).dataset;\n          keyNumElemDataset.active = \"true\";\n          setTimeout(\n            () => (keyNumElemDataset.active = \"false\"),\n            note.duration * 1000\n          );\n        }, track.notes).start();\n      });\n      dispatch({\n        type: \"LOADED_MIDI\",\n        payload: {\n          duration: Math.ceil(midi.duration),\n          playbackTimeID: playbackTime(),\n        },\n      });\n    };\n    reader.readAsArrayBuffer(file);\n  };\n\n  const PlayPause = () =>\n    dispatch(\n      state.toneState !== \"started\"\n        ? {\n            type: \"PLAY_MIDI\",\n            payload: {\n              playbackTimeID: playbackTime(),\n            },\n          }\n        : { type: \"PAUSE_MIDI\" }\n    );\n\n  const stop = () => dispatch({ type: \"STOP_MIDI\" });\n\n  return {\n    state,\n    handlers: {\n      dropFile,\n      PlayPause,\n      stop,\n    },\n  };\n};\n\nexport default usePlayer;\n","import { faPlay, faPause, faStop } from \"@fortawesome/free-solid-svg-icons\";\nimport BaseIconButton from \"./BaseIconButton\";\nimport BaseTime from \"./BaseTime\";\nimport { usePlayer as usePlayerDI } from \"../hooks\";\n\nfunction ThePlayer({ usePlayer = usePlayerDI }) {\n  const { state, handlers } = usePlayer();\n  return (\n    <div className=\"the-menu\">\n      <div className=\"the-menu__filedrop form-group\">\n        <input\n          type=\"file\"\n          id=\"dropFile\"\n          className=\"form-input\"\n          accept=\"audio/midi\"\n          onChange={handlers.dropFile}\n        />\n      </div>\n      <div className=\"the-menu__toolbar el-cluster el-cluster--justify:flex-start\">\n        <BaseIconButton\n          onClick={handlers.PlayPause}\n          iconProp={state.toneState !== \"started\" ? faPlay : faPause}\n          disabled={state.playerDisabled}\n        />\n        <BaseIconButton\n          onClick={handlers.stop}\n          iconProp={faStop}\n          disabled={state.playerDisabled}\n        />\n        <BaseTime time={state.time} duration={state.duration} />\n      </div>\n    </div>\n  );\n}\n\nexport default ThePlayer;\n","import BaseInputNumber from \"./BaseInputNumber\";\nimport BaseInputRadio from \"./BaseInputRadio\";\nimport BaseMenu from \"./BaseMenu\";\nimport BaseSelect from \"./BaseSelect\";\nimport ThePlayer from \"./ThePlayer\";\nimport { useSynthParams } from \"../hooks\";\n\nfunction TheSettings() {\n  const { getParams, setParams } = useSynthParams();\n  return (\n    <div className=\"el-grid\">\n      <div\n        style={{\n          display: \"flex\",\n          flexFlow: \"column\",\n          justifyContent: \"space-between\",\n        }}\n      >\n        <BaseMenu contentName=\"options\">\n          <BaseInputNumber\n            label=\"detune\"\n            id=\"detune\"\n            value={getParams(\"detune\")}\n            onChange={(e: any) => setParams(\"detune\", e.target.value)}\n          />\n          <BaseInputNumber\n            label=\"portamento\"\n            id=\"portamento\"\n            min=\"0\"\n            value={getParams(\"portamento\")}\n            onChange={(e: any) => setParams(\"portamento\", e.target.value)}\n          />\n          <BaseInputNumber\n            label=\"volume\"\n            id=\"volume\"\n            value={getParams(\"volume\")}\n            onChange={(e: any) => setParams(\"volume\", e.target.value)}\n          />\n        </BaseMenu>\n        <BaseMenu contentName=\"player\">\n          <ThePlayer />\n        </BaseMenu>\n      </div>\n      <BaseMenu contentName=\"ocillator\">\n        <BaseSelect\n          label=\"type\"\n          id=\"type\"\n          value={getParams(\"type\")}\n          onChange={(e: any) => setParams(\"type\", e.target.value)}\n        >\n          {[\"sine\", \"square\", \"sawtooth\", \"triangle\"]}\n        </BaseSelect>\n        <BaseInputNumber\n          label=\"partialCount\"\n          id=\"partialCount\"\n          min=\"0\"\n          step=\"1\"\n          value={getParams(\"partialCount\")}\n          onChange={(e: any) => setParams(\"partialCount\", e.target.value)}\n        />\n        <BaseInputNumber\n          label=\"phase\"\n          id=\"phase\"\n          min=\"0\"\n          step=\"0.1\"\n          value={getParams(\"phase\")}\n          onChange={(e: any) => setParams(\"phase\", e.target.value)}\n        />\n      </BaseMenu>\n      <BaseMenu contentName=\"envelope\">\n        <BaseInputNumber\n          label=\"attack\"\n          id=\"attack\"\n          min=\"0\"\n          step=\"0.001\"\n          value={getParams(\"attack\")}\n          onChange={(e: any) => setParams(\"attack\", e.target.value)}\n        />\n        <BaseInputRadio\n          label=\"attackCurve\"\n          name=\"attackCurve\"\n          value={getParams(\"attackCurve\")}\n          onChange={(e: any) => setParams(\"attackCurve\", e.target.value)}\n        >\n          {[\"linear\", \"exponential\"]}\n        </BaseInputRadio>\n        <BaseInputNumber\n          label=\"decay\"\n          id=\"decay\"\n          min=\"0\"\n          step=\"0.001\"\n          value={getParams(\"decay\")}\n          onChange={(e: any) => setParams(\"decay\", e.target.value)}\n        />\n        <BaseInputRadio\n          label=\"decayCurve\"\n          name=\"decayCurve\"\n          value={getParams(\"decayCurve\")}\n          onChange={(e: any) => setParams(\"decayCurve\", e.target.value)}\n        >\n          {[\"linear\", \"exponential\"]}\n        </BaseInputRadio>\n        <BaseInputNumber\n          label=\"release\"\n          id=\"release\"\n          min=\"0\"\n          step=\"0.001\"\n          value={getParams(\"release\")}\n          onChange={(e: any) => setParams(\"release\", e.target.value)}\n        />\n        <BaseInputRadio\n          label=\"releaseCurve\"\n          name=\"releaseCurve\"\n          value={getParams(\"releaseCurve\")}\n          onChange={(e: any) => setParams(\"releaseCurve\", e.target.value)}\n        >\n          {[\"linear\", \"exponential\"]}\n        </BaseInputRadio>\n        <BaseInputNumber\n          label=\"sustain\"\n          id=\"sustain\"\n          min=\"0.1\"\n          max=\"1\"\n          step=\"0.001\"\n          value={getParams(\"sustain\")}\n          onChange={(e: any) => setParams(\"sustain\", e.target.value)}\n        />\n      </BaseMenu>\n    </div>\n  );\n}\n\nexport default TheSettings;\n","import { useEffect, useState } from \"react\";\nimport { range } from \"ramda\";\nimport { Frequency, now } from \"tone\";\nimport { useSynth as useSynthDI } from \"../hooks\";\nimport \"./TheKeyboard.css\";\n\n// https://www.nxworld.net/js-array-chunk.html\nconst arrayChunk = ([...array], size = 1) =>\n  array.reduce(\n    (acc, value, index) =>\n      index % size ? acc : [...acc, array.slice(index, index + size)],\n    []\n  );\n\nconst midiNotes = range(21, 109);\nconst midiNotesLen = midiNotes.length / 2;\nconst toNote = (midiNote: number) => Frequency(midiNote, \"midi\").toNote();\nconst isBlackKey = (midiNote: number) => {\n  switch ((midiNote - 20) % 12) {\n    case 0:\n    case 2:\n    case 5:\n    case 7:\n    case 10:\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction TheKeyboard({ useSynth = useSynthDI }) {\n  const synth = useSynth();\n  const [dragging, setDragging] = useState(false);\n\n  const pressKey = (e: any) => {\n    const dataset = e.target.dataset;\n    if (!dataset.keyNum) return;\n    dataset.active = true;\n    synth?.triggerAttack(toNote(dataset.keyNum), now());\n  };\n\n  const releaseKey = (e: any) => {\n    const dataset = e.target.dataset;\n    if (!dataset.keyNum) return;\n    dataset.active = false;\n    synth?.triggerRelease(toNote(dataset.keyNum));\n  };\n\n  useEffect(() => {\n    const pointerdownHandler = () => setDragging(true);\n    const pointerupHandler = () => setDragging(false);\n    document.addEventListener(\"pointerdown\", pointerdownHandler);\n    document.addEventListener(\"pointerup\", pointerupHandler);\n    return () => {\n      document.removeEventListener(\"pointerdown\", pointerdownHandler);\n      document.removeEventListener(\"pointerup\", pointerupHandler);\n    };\n  }, []);\n\n  return (\n    <div\n      className=\"the-keyboard el-stack\"\n      style={{ margin: \"0 auto\" }}\n      onPointerDown={pressKey}\n      onPointerOver={(e: any) => dragging && pressKey(e)}\n      onPointerUp={releaseKey}\n      onPointerOut={(e: any) => dragging && releaseKey(e)}\n    >\n      {arrayChunk(midiNotes, midiNotesLen)\n        .reverse()\n        .map((chunk: Array<number>, i: number) => {\n          return (\n            <div className=\"the-keyboard__row\" key={i}>\n              {chunk.map((midiNote: number) => {\n                const _note = toNote(midiNote);\n                return (\n                  <div\n                    className=\"the-keyboard__key-container\"\n                    key={midiNote - 21}\n                  >\n                    <div\n                      className={\n                        \"the-keyboard__key\" +\n                        \" \" +\n                        (!isBlackKey(midiNote) ? \"--white\" : \"--black\")\n                      }\n                      data-key-num={midiNote}\n                    >\n                      <span className=\"the-keyboard__label\">\n                        {/C[1-8]/.test(_note) ? _note : \"\"}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n\nexport default TheKeyboard;\n","function BaseLink(props: { url: string; label: string }) {\n  return (\n    <a\n      className=\"base-link\"\n      href={props.url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {props.label}\n    </a>\n  );\n}\n\nexport default BaseLink;\n","import BaseLink from \"./BaseLink\";\n\nfunction TheFooter() {\n  return (\n    <div className=\"the-footer-child el-center\">\n      <small className=\"the-footer-child__container\">\n        <BaseLink url=\"https://github.com/l1ck0h/keyboard\" label=\"GitHub\" /> /\n        &copy; 2022 l1ck0h\n      </small>\n    </div>\n  );\n}\n\nexport default TheFooter;\n","import { useReducer } from \"react\";\nimport TheSettings from \"./components/TheSettings\";\nimport TheKeyboard from \"./components/TheKeyboard\";\nimport TheFooter from \"./components/TheFooter\";\nimport { initialState, reducer, StoreContext } from \"./store\";\nimport \"./App.css\";\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  return (\n    <div className=\"App\">\n      <StoreContext.Provider value={{ state, dispatch }}>\n        <div className=\"el-cover\">\n          <TheSettings />\n          <div className=\"el-reel\">\n            <TheKeyboard />\n          </div>\n          <TheFooter />\n        </div>\n      </StoreContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"spectre.css/dist/spectre.min.css\";\nimport \"spectre.css/dist/spectre-exp.min.css\";\nimport \"@l1ck0h/every-layout.css/every-layout.min.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}